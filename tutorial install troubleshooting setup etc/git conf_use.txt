Git 환경 설정 및 명령어 사용

vscode 열기 (자동으로 열림)
--------------------------------------
  $code .
--------------------------------------

에디터 등록하기, 여기서 --global 옵션을 주어서 editor 선택
--------------------------------------------------------
  $git config --global core.editor "code --wait"
--------------------------------------------------------
또는 
--------------------------------------------------------
  $git config --global core.editor "code"
--------------------------------------------------------
**참고: 
예를 들어, "code --wait"은 vscode 의미하고, "atom --wait"는 아톰 에디터임

***참고: --wait의 차이점은 git config파일을 열어 볼려고 할 때 
vscode에디터에서 환경설정 파일이 열리고 터미널에서 또 작업을 할 수 있으나 
--wait 옵션을 주면 환경설정 파일이 저장을 하고 끄기전에는 터미널에서 작업을 할 수 없음 (즉, 터미널이 wait중)
--wait 옵션을 추천!

코드에디터로 환경설정 파일 열기
--------------------------------------------------------
  $git config --global -e
--------------------------------------------------------

이름과 이메일 등록
--------------------------------------------------------
  $git config --global user.name "Your Name"
  $git config --global user.email "youremail@domain.com"
--------------------------------------------------------

configuration 확인
--------------------------------------------------------
  $git config --list
--------------------------------------------------------
또는 
--------------------------------------------------------
  $git config --global --list
--------------------------------------------------------
  
리눅스는 input으로 설정
--------------------------------------------------------
  $git config --global core.autocrlf input
--------------------------------------------------------
또는 윈도우는 true로 설정
--------------------------------------------------------
  $git config --global core.autocrlf true
--------------------------------------------------------

**참고: core.autocrlf 줄바꿈이 일어날 때 
윈도우에서는 text \r\n (carriage-return)과 (new line feed) 일어나는 데 (줄바꿈할 때)
리눅스나 맥에서는 text \n (carriage-return)이 발생하지 않고 (new line feed)만 되므로 
윈도우와 리눅스에 서로 작업할 때 core.autocrlf 에서 자동으로 윈도우에서 저장할 때는 \r\n을 해주고
맥이나 리눅스에서는 \n 해준다고 함

리눅스는 input , 윈도우에서는 true로 설정해줘야지,
윈도우에서 작업했을 때와 리눅스에서 했을 때 서로 문제가 없도록 해준다고 함

한글파일명이 354\213\234\354\236\221.txt 이런식으로 나올 때 설정해주기
--------------------------------------------------------
  $git config --global core.quotepath false
--------------------------------------------------------

**참고: "" \ \t \n \\ 항상 escape 되어 지는데 
한글 인코딩이 utf-8에 들어가서 큰 바이트를 가지면 unsual 상태로 바뀌게 되어서 그렇다고 함
기본값인 true에서 false로 바꾸면 0x80보다 크더라도 unsual상태로 안된다고 함
뭐.. 그렇다고 함......

remote (원격 저장소) 연결하기
------------------------------------------------------------------------------------------
  $git remote add origin https://github.com/(본인계정or계정)/(repository_name)coding.git
------------------------------------------------------------------------------------------
  
이렇게 origin으로 한번 저장해놓으면 다음부터는 origin만 사용해서 remote에 접속해진다

등록한 원격저장소 지우기
--------------------------------------------------------
  $git remote remove origin
--------------------------------------------------------

____________________________________________________________________________________________________
_____________________________________________________________________________________________________
git 주요 명령어

일단 깃을 사용할 디렉토리를 만들어 준다
--------------------------------------------------------
  $mkdir projects
--------------------------------------------------------

해당 디렉토리 이동 cd git 으로 이동해서 초기화시키기 (repositiory 만들어 줌)
--------------------------------------------------------
  $cd projects
  $git init
Initialized empty Git repository in /home/sgtocta/projects/git/.git/
--------------------------------------------------------
이렇게 나옴, local에 git 할 준비가 된 것 임

파일 보기 (숨긴파일도 보기)
--------------------------------------------------------
  $ls -al 해서 보면
drwxrwxr-x. 7 sgtocta sgtocta 119 Jan 11 07:36 .git
--------------------------------------------------------
.git 요렇게 숨어 있음

git 지우려면 
--------------------------------------------------------
  $rm -rf .git
--------------------------------------------------------

깃 상태 보기
--------------------------------------------------------
  $git status
--------------------------------------------------------

자주 쓰는 명령어 alias 설정하기 
(alias.단축으로쓸별칭 실제명령어)
--------------------------------------------------------
  $git config --global alias.st status
--------------------------------------------------------


____________________________________________________________________________________________________
____________________________________________________________________________________________________
실제 사용해 보기- 튜토리얼

일단 git 만들어진 디렉토리에서 a.txt b.txt c.txt를 만들어 본다
--------------------------------------------------------
  $echo hello world! > a.txt
--------------------------------------------------------
이런식으로 3개 만들고 

staus확인
--------------------------------------------------------
  $git status
On branch master

Initial commit

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	a.txt
	b.txt
	c.txt

nothing added to commit but untracked files present (use "git add" to track)
--------------------------------------------------------
이런식으로 나오게 되는데 
untracked files에 a,b,c.txt 파일이 있는 것을 알 수 있다

다음은 git add를 이용해서 tracked 으로 (commit할 준비를 해주는 것)
git add 파일명으로 staged filed로 추가
--------------------------------------------------------
  $git add a.txt

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)

	new file:   a.txt

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	b.txt
	c.txt
--------------------------------------------------------
이렇게 a.txt파일이 변경된 것을 볼 수 있음

--------------------------------------------------------
  $git add a.txt b.txt 이런식으로 해도 되고
  $git add *.txt 라고 하면 모든파일.txt
--------------------------------------------------------

모든 파일 add 시키기  
--------------------------------------------------------
  $git add .
--------------------------------------------------------
모든 파일을 add 시켜줌

여기에서 add된 파일을 수정하기
--------------------------------------------------------
  $echo mike >> a.txt
--------------------------------------------------------

로 파일에 내용을 추가하게 되면 git status에 수정되었다고 나옴
--------------------------------------------------------
  $git status

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)

	new file:   a.txt
	new file:   b.txt
	new file:   c.txt

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   a.txt
--------------------------------------------------------
또 이렇게 나옴

즉 git add로 파일을 추가하게 되면 staged files이 되어서 staging area에 들어가게 되고
그런 파일을 수정하게 되면 그 파일은 modified file이 되어서 
untracked 상태로 되어져 있게 됨, 즉 버전 별로 파일이 존재하게 됨

다시 untracked 상태로 바꾸기
--------------------------------------------------------
  $git rm --cached *

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	a.txt
	b.txt
	c.txt
--------------------------------------------------------
요렇게 된 것을 알 수 있음

만약 파일이 디렉토리 안에 있을 경우 
--------------------------------------------------------------------
fatal: not removing 'phpClass/includes' recursively without -r
--------------------------------------------------------------------
하고 에러가 발생

--------------------------------------------------------------------------------
[ta@localhost projects]$ git rm -r --cached *
usage: git rm [<options>] [--] <file>...

    -n, --dry-run         dry run
    -q, --quiet           do not list removed files
    --cached              only remove from the index
    -f, --force           override the up-to-date check
    -r                    allow recursive removal
    --ignore-unmatch      exit with a zero status even if nothing matched
----------------------------------------------------------------------------------
이때에는 -r 옵션을 해줘야하고 --cached 를 꼭 써야함 (index에서 제거하는것은 staging area에서 제거하는 것)
--cached를 안사용하면 파일이 지워질 수도 있다. 
테스트 해봐야할 듯

<트러블슈팅>
디렉토리가 포함되었을 때는 --cached 다음에 디렉토리명을 적으면 됨
--------------------------------------------------------
  $gir rm -r --cached test/*
--------------------------------------------------------
으로 해주면 됨


트랙킹 하기 싫은 파일 (추가하기 싫은 파일)은 .gitignore 에 넣어준다
예를 들어서 test.log 파일이 있다고 했을 때
--------------------------------------------------------
  $echo test > test.log
  $echo *.log > .gitignore
--------------------------------------------------------
을 하게 되면 
또는 그냥 vi로 연 후에 편집 후 저장해도 됨, 윈도우면 그냥 메모장으로 만들어도 됨
--------------------------------------------------------
  $vi .gitignore

  $ls -al 
--------------------------------------------------------
.gitignore 이 생겨있고 (숨김파일로 되있음)
staus에서 untracked files 로만 나오고 test.log 파일을 추적이 안되고 있음을 알 수 있다
(.gitignore 에 파일형태로 추가할 수 있음)

.gitignore 파일 편집하기
파일에서는 주석 가능 #으로 주석, 파일 내용 아래처럼 수정
--------------------------------------------------------
#특정파일명
test.log
#주석, 특정확장자의 모든파일 
*.log

#특정디렉토리 
build/

#특정디렉토리의 특정 파일들
build/*.log 

#특정디렉토리의 모든 파일
phpClass/uploads/*
--------------------------------------------------------

변경된 사항 확인할 때는 
--------------------------------------------------------
   $git diff

diff --git a/a.txt b/a.txt
index 7a6f78f..4606027 100644
--- a/a.txt
+++ b/a.txt
@@ -1,2 +1,3 @@
 hello world!
 mike
+add txt
--------------------------------------------------------
파일이 변경되었다면 이런식으로 나옴
q를 누르면 빠져나온다

config파일 열어서 설정 추가해주기 (위에서 설정에서 vscode를 미리 등록해야함)
--------------------------------------------------------
  $git config --global -e
--------------------------------------------------------
해서 vscode가 열리면 파일에 추가해줌
--------------------------------------------------------
[diff]
	tool = vscode
[difftool "vscode"]
	cmd = code --wait --diff $LOCAL $REMOTE
--------------------------------------------------------

저장하고 끔. 터미널에서 
--------------------------------------------------------
   $git difftool

Viewing (1/1): 'a.txt'
Launch 'vscode' [Y/n]
--------------------------------------------------------
이라고 치면 (modified 된 파일이 있다면 위에 처럼 나오게 됨 y하면 vscode가 열림

staging area에 있는 파일들 볼려면
--------------------------------------------------------
  $git difftool --staged

마찬가지로 해당파일을 vscode에서 열겠냐고 물어보고 y누르면 열림/ 확인하면 됨

드디어 commit하기
--------------------------------------------------------
  $git commit
--------------------------------------------------------
vscode로 staging area 에 있는 파일이 commit되기 위한 파일이 열림
그럼 맨 위에 Title과 Description을 넣어주고 저장하면 commit이 됨 
(git repository에 넘어가게됨)

아래 처럼 입력 (Title과 Description만 간략하게 적어주면 되는 듯)
--------------------------------------------------------
Title

Description

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# On branch master
#
# Initial commit
#
# Changes to be committed:
#	new file:   a.txt
#	new file:   b.txt
#	new file:   c.txt
#
# Changes not staged for commit:
#	modified:   a.txt
#
# Untracked files:
#	.gitignore
#
--------------------------------------------------------

그리고 저장 후 vscode 에디터를 끄면..아래처럼 나옴
--------------------------------------------------------
[master (root-commit) b1b5c42] Title
 3 files changed, 4 insertions(+)
 create mode 100644 a.txt
 create mode 100644 b.txt
 create mode 100644 c.txt
--------------------------------------------------------
b1b5c42는 해쉬코드 앞부분이 표시된 것, 입력한 Title이 나오게 됨 
그리고 3개 파일이 created 파일이 생겼다고 나옴

방금 커밋한 히스토리 보기
--------------------------------------------------------
  $git log

commit b1b5c427d6a6d54043dc75c502e63b99a45dcdac
Author: mike <이메일@gmail.com>
Date:   Mon Jan 11 08:33:25 2021 -0800

    Title
    
    Description
--------------------------------------------------------
실제 해쉬코드 전체와 만든사람, 날짜, 타이틀, 설명까지 나오게 됨


간단하게 commit 할때는 -m 을 넣어서 가능

일단 파일을 한개 더 추가한다고 가정하고 파일만든다음에 add
--------------------------------------------------------
  $echo test add > d.txt
--------------------------------------------------------
파일만들고 다시 git add  시켜줌
--------------------------------------------------------
  $git add d.txt 
--------------------------------------------------------

간단 버전 commit 하기, -m 옵션을 쓰고 "title메세지" 를 적는다
--------------------------------------------------------
  $git commit -m "second commit"

[master b58d728] second commit
 1 file changed, 1 insertion(+)
 create mode 100644 d.txt
--------------------------------------------------------
바로 실행되는 것을 알 수 있음

커밋 옵션에 -a를 붙이면 전부다 커밋하게 됨
(git add로 안하고 staging area와 working directory에 있는 전부다 
모든 게 맘에 든다고 했을 떄 )
--------------------------------------------------------
  $git commit -am "all commit"
--------------------------------------------------------

Add 취소하기, 모든 staged files 취소하기
--------------------------------------------------------
  $git reset 
--------------------------------------------------------

git reset HEAD file명으로 add한 file을 취소할 수 있고 file명을 쓰지 않으면 전체 파일 취소가 된다!
(HEAD는 지금 현재 최신상태)
좀 더 공부 필요~ 혹시 파일이 지워지지는 않는지 확인 필요!!

push 하기
!!**중요: push를 하기에 앞서
기존에 remote repo (github리포지터리)가 변경된 것이 없다면 바로 push를 해도 되겠지만,
다른 컴퓨터라든지 다른 환경에서 다시 새로 시작한 (git init으로..) 경우라면 
pull을 먼저해서 remote repo (github리포지터리)에서 파일들을 다운로드를 해서 싱크(?)를 맞춰 놓아야
나중에 에러가 생기는 것을 방지할 수 있다!
일단 로컬 레포지터리와 원격레포지터리(github)는 일단 같은 상태(파일,디렉토리 등등)라고 생각하면 될 듯 하다
예를 들어서 원격 리포지터리에서 파일을 임의로 삭제한다음에 로컬에서 다른파일을 올리고 이런식으로 했더니 (뒤죽박죽)
로컬과 원격 환경이 달라서 에러 때문에 commit된 파일을 push를 할 수 없게 되기도 함..
(처음에 그냥 블로그 처럼 소스코드를 막 올리면 되는 줄 알았음 ㅠㅠ 일단 로컬과 원격은 같은 상태를 유지해야하는 것이 중요
예를 들어 로컬에서 수정해서 커밋을 했다면 원격에도 적용을 해줘야하는 듯 함)

다시 push 하는 방법
로컬에서 commit이 되었고 remote repository에 업로드 하려면 push 명령어를 사용
**참고: 여기서 origin은 미리 git config remote add를 통해서 먼저 설정해줘야한다 (위에 설정 참고)
origin이 remote repository가 된다
--------------------------------------------------------
  $git push origin main 
--------------------------------------------------------

**참고: 현재 저장소에서는 main이 branch default로 되어 있음
원래 master였으나 인종차별언어로 main으로 바꾸기로 하였다고 함

그 밖에 Viewing branches (-a 옵션 모든 branches 보기)
--------------------------------------------------------
  $git branch -a
*main
master 
--------------------------------------------------------
이런식으로 나옴 (* 되어 있는 것이 default branch)

새로운 branch 만들기 (-b 옵션 뒤에는 만들고 싶은 브랜치명)
--------------------------------------------------------
  $git checkout -b develop

Switched to a new branch 'develop'
--------------------------------------------------------
이렇게 나옴

브랜치 바꾸기
--------------------------------------------------------
  $git checkout master
--------------------------------------------------------



