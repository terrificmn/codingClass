# dhcp static으로 변경하기
포트포워딩으로 ssh 접속에 성공했다면 ip를 고정해 주는 것이 좋다.  

라즈베리 파이가 무선인터넷을 사용하면 dhcp로 ip를 자동 할당 받는데..  
그래서 아이피가 바뀔 수 있기 때문에 설정을 변경해준다.

근데.. 왠만하면 안바뀐다. ㅋㅋ 
그래도 자주 사용 안하거나 다른 디바이스에게 공유기가  
ip를 할당해주면 ip가 바뀔 수 있으므로 ip를 고정해주자!

먼저 ssh로 접속을 한 후에, (라즈베리파이에 키보드/모니터 연결해서 사용하거나) 

먼저 ip주소를 확인!
```
$ifconfig
```
위에서 wlan0 부분에 나오는 ip주소를 적어준다.

그리고 route 를 해보면 Gateway 확인!
```
$route
```
나의 경우에는 default gateway가 192.168.0.1  로 나옴


이제 설정파일을 열어서 수정해준다
```
sudo vi /etc/dhcpcd.conf
```

Example static IP configuration: 아래에 주석처리되어 있는 부분을 해제해서   
수정한다

```
interface wlan0
static ip_address=10.7.1.35/24 
static routers=10.7.1.3
static domain_name=8.8.8.8
```
interface eth0에서 -> wlan0으로 수정~ 무선랜~사용    
static ip_address가 고정시킬 아이피 주소인데 ifconfig로 확인한 ip주소를 적어준다 /24까지 적어준다  
static routers는 게이트웨이가 되고 위에서 확인한 게이트웨이 주소를 적어준다  
static domain_name은 8.8.8.8 로 고정해주기~ 구글 DNS서버  

이제 저장을 한후에 빠져나오고  
그리고 reboot를 해준다


## 사설ip처럼 보여도 서로 다른 네트워크 일 수가 있다.
그냥 참고하자~ skip 해도 됨
```
$route
```
라우트를 입력하면 Gateway를 알 수가 있는데..  
라우트가 만약 여러개가 있어서 switch장비가 있을 수 있는데..   
기본적으로 gateway가 다르면, 
다른 장비에서 라우터 또는 스위치에서 사설ip를 주기 때문에   

사설ip가 192.168로 시작해서 비슷해보여서 맞는 ip, 혹은 같은 내부망이라고 생각할 수 있겠지만  
다른 망(네트워크)이라면 접속이 안되므로 참고한다.

아마도 유선과 무선의 네트워크 망이 다른 부분인 것 같다.   

참고로 학교의 상황에서는.. PC에서 윈도우에서 ipconfig를 해보면   
기본 게이트웨이가 192.168.0.1 로 나온다.

그리고 원격으로 접속중인 라즈베리파이에서도
route를 해보면 default gateway 192.168.0.1 로 나오는 것을 확인할 수 있고 

이것은 같은 네트워크 라는 것을 알 수 있다.  pc와 라즈베리파이는 같은 망에 있다.  
그래서 ip주소만 보자면 192.168.xxx.xxx 이다.  

이제 라즈베리 파이를 무선 와이파이를 잡아서 ip를 확인해보면  
역시 아이피가 192.167.xxx.xxx 이렇게 나온다.  
딱봐도 오~ 같은 네트워크에서 사설ip를 받았다고 생각할 수 있는데..   

그래서 PC에서 라즈베리파이로 ssh로 연결을 한다면.. 접속이 안되는 상황이 생기고..  
ip도 맞고 같은 네트워크 인것 같은데 하면서, 뭔가 해결은 안되고 미궁을 빠진다..

하지만 게이트 웨이를 확인해 보면 route  
192.168.254.1 로 나오는 것을 알 수 있고.. 이는 다른 네트워크를 의미하게 된다.  

겉으로 보이는 자신의 아이피는 192.168.0.10 이런식으로 나오니.. 
아~ 같은 네트워크에서 사설ip를 받았구나 해서 접속을 시도하지만.. 
다른 네트워크 (공유기)에서 받은 사설ip 이므로 접속이 안되는 것으로 알면 된다.