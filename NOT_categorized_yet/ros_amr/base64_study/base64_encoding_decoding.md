cpp에는 base64로 변환하는 스탠다드 라이브러리는 없는 듯 하고  
참고해서 이해하고 만들면 될 듯 하다 

[일단여기보고 공부](https://matgomes.com/understanding-base64-encoding/)

[stackoverflow에서 image변환 질문-여기에서hint얻기](https://stackoverflow.com/questions/56955058/convert-image-jpg-to-base64)


Base64 encoding은 binary data를 읽을 수 있는형태로 (ASCII characters) 바꾸는 방법

64개의 ASCII 캐릭터를 사용(대,소문자, 숫자, +,/)해서 Base64 라고 한다  
```
A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,
a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,
0,1,2,3,4,5,6,7,8,9,+,/
```

정규식으로 대입을 해보면  
```
[A-Z] [a-z] [0-9] {+,/}
```


이제 64개의 캐릭터를 4개로 나누게 된다  (16)

1. 3 bytes로 나눈다 (3개의 그룹)
3개의 그룹에서는 
- 24bits 로 3 bytes를 연결하는데  
- 24-bits long sequence를 4그룹으로 나누는데 각 6bits씩 이다
- 각 그룹의 6bits 의 value를 Base64 캐릭터에 해당하는 offset으로 변형

2. 만약 3-byte 그룹이 끝에서 꽉 차지 않거나 남는 byte가 없는 경우
- 남는 bytes를 연결
- 가능한 6-bit group으로 나눈다
- 남는 6-bit가 안되는 그룹은 마지막 6-bit 그룹이 될 때까지 0으로 채운다
- 각 그룹을 Base64 캐릭터로 변환
- 4개의 캐릭터가 다 합쳐질 때까지 남은 bytes를 "=" 채운다

3. 마지막으로 4개의 캐릭터 그룹을 순서대로 모아준다 


아래는 4개의 Base64 와 관련된 char와 offset

| | | | | | | | | | | | | | | | | | 
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|char| A | B | C | D | E | F | G | H | I | J | K | L | M | N | O | P | 
|offset | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15|

| | | | | | | | | | | | | | | | | | 
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| char | Q | R | S | T | U | V | W | X | Y | Z | a | b | c | d | e | f | 
| offset | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 | 26 | 27 | 28 | 29 | 30 | 31 |

| | | | | | | | | | | | | | | | | | 
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|char| g | h | i | j | k | F | G | H | I | J | K | L | M | N | O | P | 
|offset | 32 | 33 | 34 | 35 | 36 | 37 | 38 | 39 | 40 | 41 | 42 | 43 | 44 | 45 | 46 | 47|

| | | | | | | | | | | | | | | | | | 
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| char | w | x | y | z | 0 | 1 | 2 | 3| 4 | 5 | 6 | 7 | 8 | 9| + | / |
| offset | 48 | 49 | 50 | 51 | 52 | 53 | 54 | 55 | 56 | 57 | 58 | 59 | 60 | 61 | 62 | 63 |

위의 테이블에 맞춰서 변형 한다고 생각을 하면 된다  


## Concatenate
```
{01010101, 01010101, 01010101}
```
각각 1바이트 씩이다.  (8비트씩)
위에서 설명한 것 처럼 8비트씩 24비트가 된다  

이를 하나로 concatenating을 해준다
```
{010101010101010101010101}
```
이제 하나로 된 24bits 를 다시 6-bits  그룹으로 나눠준다 

| BINARY | DEC | BASE64 |
| --- | ---| --- | 
| 010101 | 21 | 
| 010101 | 21 | 
| 010101 | 21 | 
| 010101 | 21 | 


이제 Base64로 변환하게되면 V 가 된다 

| BINARY | DEC (offset) | BASE64 (char) |
| --- | --- | --- | 
| 010101 | 21 | V |
| 010101 | 21 | V |
| 010101 | 21 | V |
| 010101 | 21 | V |

> 위의 표를 참고해서 보면  base64 캐릭터와 offset를 참고하면 offset 21에 해당하는 것을 2진수로 바꾸면 (binary) 01010이 된다. 그리고 21에 해당하는 char는 V 가 된다












자료
