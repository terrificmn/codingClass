# max1348 모듈 사용 rs485

max1348 모듈을 사용해서 rx tx 선을 연결해서 rs485로 통신을 할 수가 있다   
작동전압 5V 권장 (3.3v / 5v 사용 가능)  
시리얼(UART) TTL 레벨의 신호를 RS485 레벨로 변환해주는 컨버터 모듈 (STM, Arduino등)  
15KV 정전기 보호

> 권장은 5v 이지만, esp32에서는 5v가 충분이 안나오므로 3.3v 로도 잘 작동된다.   
테스트 해봐야할 것은 30핀 짜리 esp32에서는 5v 로 잘 사용했는데, 38핀에서는 5v는 있으나마나,,   
외부 5V 입력으로 사용하는 용도 인 듯 하다 

## 핀 맵
아두이노, esp32 등으로는 
```
            GND
D+/A        Rx
D-/B        Tx
            Vcc
```
Rx 에는 19, Tx에는 18으로 해서 연결해준다. ESP32 같은 경우는 3개의 시리얼포트를 제공하므로  
Serial2로 핀을 지정하고 사용할 수가 있다   

> 이유는 모르겠지만, 18을 Rx로 사용했을 때는 안되었음;;; 왜인지는 좀 더 테스트를 해봐야할 듯


Rs485로 연결하는 쪽 예를 들어 모터, 배터리 쪽과 통신을 하면  
제공하는 A, B 등으로 선이 제공된다면 그냥 그대로 A는 A, B는 B에 연결을 해주면 된다   

> 서로 반대로 연결해주는 것도 테스트를 해봐야할 듯 하지만, 받아지는 것은 같은 듯 하다   

openCR에서는 Serial3 사용할 때 데이터를 쓰거나 받을 때 delay(5) 정도를 줬는데, 그 정도 딜레이는 필요한 듯 하다  ㅠ  
딜레이가 없으면 데이터를 제대로 못 받는 듯 하다   
